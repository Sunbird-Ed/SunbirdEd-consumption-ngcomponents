<!-- card component -->
<span *ngIf="!layoutConfig">
  <mat-card role="link" tabindex="0" [ngClass]="{'recently-viewed': type === LibraryCardTypes.RECENTLY_VIEWED, 'offline': isOffline, 'selected': isSelected}"
  (click)="onClick($event)" (keydown.enter)="onEnterKeyPress($event)" *ngIf="!isLoading" tabindex="0">
  <mat-card-header>
    <div mat-card-avatar> <img [src]="cardImg" alt=""> </div>
    <mat-card-title class="mat-body-1 sb__ellipsis sb__ellipsis--two text-left">{{content?.name}}</mat-card-title>
    <mat-card-subtitle class="mat-small sb__ellipsis sb__ellipsis--two m-0" *ngIf="content?.subject?.length || content?.gradeLevel?.length">
      <span class="data_1 ellipsis">{{content?.subject}}</span>
      <span *ngIf="content?.subject?.length && content?.gradeLevel?.length" class="dot-divider"></span>
      <span class="data_2 ellipsis">{{content?.gradeLevel}}</span>
    </mat-card-subtitle>
    <a *ngIf="isMenu" role="button" aria-label="View more actions menu" class="menu" (click)="onMenuClick($event);$event.stopPropagation()" tabindex="0"></a>
  </mat-card-header>
  <mat-card-content>
    <!-- content for only desktop -->
  <div *ngIf="type === LibraryCardTypes.DESKTOP_TEXTBOOK || type === LibraryCardTypes.PORTAL_QRCODE_FLATRESULT">
    <div class="d-flex flex-ai-center flex-jc-space-between mat-card-info">
      <!-- other meta info Medium, Organization etc -->
      <div class="text-left mat-small">
        <div *ngIf="content?.medium">
          <span>{{moreInfoLabel}}: {{content?.medium}}</span>
        </div>
        <div *ngIf="content?.organisation"><bdi>{{content?.organisation}}</bdi></div>
      </div>
      <!-- other meta info Badge and card category Book, learn, practice -->
      <div class="mat-card__badge d-flex">
        <img *ngIf="content?.badgeAssertions" class="mr-8"
            [src]="content?.badgeAssertions[0]?.badgeClassImage" alt="" />
        <span class="mat-card__type" *ngIf="content?.resourceType">
         <span class="sb__ellipsis">{{content?.resourceType}}</span>
        </span>
      </div>
    </div>
    <div *ngIf="type === LibraryCardTypes.PORTAL_QRCODE_FLATRESULT">
      <button mat-raised-button color="accent" class="w-100 button-label">
        <mat-icon class="mr-4">play_circle</mat-icon>
        {{btnlabel}}
      </button>
    </div>
  </div>

   <!-- Qr code card -->
   <div *ngIf="type === LibraryCardTypes.QRCODE_RESULT">
    <!-- Section area if not available it will be hidden -->
    <div class="text-left mat-small" *ngIf="section !== null">
      <div class="sb__ellipsis" *ngIf="section">
        <span class="label">moreInfoLabel: </span>
        <span class="value">section</span>
      </div>
    </div>
  </div>
   <!-- <ng-content select=".card-hover">
    
  </ng-content> -->
  <ng-container
    *ngTemplateOutlet="gridTemplate; context: {$implicit: content?.hoverData, hoverData: content?.hoverData, content:content}"
    class="card-hover">
  </ng-container>
  </mat-card-content>
</mat-card>

<mat-card role="link" tabindex="0" class="mat-card-v1 w-100 h-100 d-flex flex-dc p-0 animationLoading" *ngIf="isLoading">
  <mat-card-header>
    <div mat-card-avatar> <div class="animation-highlight w-100" style="height:100%"> </div> </div>
    <mat-card-title class="text-left animation-highlight w-60 mt-16"></mat-card-title>
    <mat-card-subtitle class="text-left animation-highlight mt-16" style="width:40%"></mat-card-subtitle>
    <a *ngIf="isMenu" role="button" aria-label="View more actions menu" class="menu" (click)="onMenuClick($event);$event.stopPropagation()" tabindex="0"></a>
  </mat-card-header>
  <mat-card-content class="m-0">
    <div class="d-flex">
      <div class="text-left px-16 pb-12">
        <div class="animation-highlight mb-8" style="width:120px"></div>
        <div class="animation-highlight" style="width:120px"></div>
      </div>
    </div>
  </mat-card-content>
</mat-card>


</span>
<span *ngIf="layoutConfig">
    <ng-container *ngIf="(layoutConfig && !layoutConfig.layout) || layoutConfig.layout === 'v2'">
      <sb-library-card-v2 layout='v2-type4' [indexToDisplay]="indexToDisplay" [isLoading]="isLoading" [content]="content" [isMobile]="isMobile"
      [isOffline]="isOffline" [cardImg]="cardImg" [type]="type" [moreInfoLabel]="moreInfoLabel" [isSelected]="isSelected"
      [section]="section" [btnlabel]="btnlabel" [btnicon]="btnicon"
      [layoutConfig]="layoutConfig" [isMenu]="isMenu" (cardClick)="onClick($event)" (enterKeyPress)="onEnterKeyPress($event)"
      (menuClick)="onMenuClick($event);$event.stopPropagation()" [hover-template]="gridTemplate"
      ></sb-library-card-v2>
    </ng-container>
    <ng-container *ngIf="layoutConfig.layout === 'v3'">
      <sb-library-card-v3 [indexToDisplay]="indexToDisplay" [isLoading]="isLoading" [content]="content" [isMobile]="isMobile"
      [isOffline]="isOffline" [cardImg]="cardImg" [type]="type" [moreInfoLabel]="moreInfoLabel" [isSelected]="isSelected"
      [section]="section" [btnlabel]="btnlabel" [btnicon]="btnicon"
      [layoutConfig]="layoutConfig" [isMenu]="isMenu" (cardClick)="onClick($event)" (enterKeyPress)="onEnterKeyPress($event)"
      (menuClick)="onMenuClick($event);$event.stopPropagation()" [hover-template]="gridTemplate"
      ></sb-library-card-v3>
    </ng-container>
    <ng-container *ngIf="layoutConfig.layout === 'v4'">
      <sb-library-card-v4 [indexToDisplay]="indexToDisplay" [isLoading]="isLoading" [content]="content" [isMobile]="isMobile"
      [isOffline]="isOffline" [cardImg]="cardImg" [type]="type" [moreInfoLabel]="moreInfoLabel" [isSelected]="isSelected"
      [section]="section" [btnlabel]="btnlabel" [btnicon]="btnicon"
      [layoutConfig]="layoutConfig" [isMenu]="isMenu" (cardClick)="onClick($event)" (enterKeyPress)="onEnterKeyPress($event)"
      (menuClick)="onMenuClick($event);$event.stopPropagation()" [hover-template]="gridTemplate"
      ></sb-library-card-v4>
    </ng-container>
</span>